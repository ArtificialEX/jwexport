(function(){function b(a){var b=[],c=new RegExp("\\b"+a+"\\b"),d=CKEDITOR.document.$;var e=d.getElementsByTagName("*");for(var f=0;f<e.length;f++){var g=e[f].className;if(c.test(g)){b.push(e[f]);break}}return(new CKEDITOR.dom.nodeList(b)).getItem(0)}var a=CKEDITOR.document.getWindow();var c=["toolbar-apply","toolbar-save","save","formelm-buttons"];for(var d=0;d<c.length;d++){var e=c[d],f=CKEDITOR.document.getById(e)||b(e);action="",child=null;if(f){if(f.getChildCount()){var g=f.getChildren();for(var d=0;d<g.count();d++){child=g.getItem(d);if(child.type!=CKEDITOR.NODE_TEXT&&(child.getName()=="a"||"button")){action=child.getAttribute("onclick");if(action&&action.toString().match(/submitbutton\('(.*)'\)/)){action=RegExp.$1}break}}}break}e=""}var h={modes:{wysiwyg:1,source:1},exec:function(b){if(a.$.submitbutton)a.$.submitbutton(action);else if(Joomla&&Joomla.submitbutton)Joomla.submitbutton(action)}};var i="save";CKEDITOR.plugins.add("jsave",{init:function(b){var c=b.addCommand(i,h);c.modes={wysiwyg:!!(a.$.submitbutton||Joomla&&Joomla.submitbutton)};if(e){b.ui.addButton("Save",{label:b.lang.save,command:i})}}})})()